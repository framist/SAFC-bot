// use teloxide::prelude::*;
// use teloxide::utils::markdown::escape;
use teloxide::types::InlineKeyboardButton;
use teloxide::types::InlineKeyboardMarkup;

const BOT_INFO: &str = r#"# å¤§å­¦ç”Ÿåè¯ˆä¸­å¿ƒ

*ç¤¾ç¾¤ï¼Œä¿æŠ¤ï¼Œå¼€æ”¾*

## èƒŒæ™¯

è‡ªä»æœ€åˆçš„å¯¼å¸ˆè¯„ä»·ç½‘ï¼ˆurfireï¼‰å…³é—­ï¼Œæ—¶è‡³ä»Šæ—¥ï¼Œä¸€æ‰¹ä¸€æ‰¹çš„æ–°å¯¼å¸ˆè¯„ä»·æ•°æ®åˆ†äº«å¹³å°çš„è¿­èµ·å…´è¡°ï¼Œæœ€ç»ˆéƒ½è½äº 404 æˆ–æ”¶è´¹é—­å¡ã€‚
ä¸çŸ¥æ˜¯ä½•ç­‰é˜»åŠ›ï¼Œè®©å—è¿‡æ¬ºéª—çš„å­¦ç”Ÿå’ŒäºŸéœ€ä¿¡æ¯çš„å­¦ç”Ÿæ•£è‹¥æ¸ºèŒ«æ˜Ÿç«ã€‚
æ•…å»ºæ­¤å¹³å°ä¸æœºå™¨äººï¼Œé©æ–°æ–¹å¼ï¼ŒåšæŒâ€œç¤¾ç¾¤ï¼Œä¿æŠ¤ï¼Œå¼€æ”¾â€çš„ç†å¿µï¼Œä¿¡å¥‰å¯†ç æœ‹å…‹ã€å¼€æºç²¾ç¥ï¼Œæ„¿æ­¤å’Œè°å…±èµ¢åœ°æŒä¹…æ€§å‘å±•ä¼ æ‰¿ä¸‹å»ã€‚

## ç›®çš„

é™¤äº†è­¦æƒ•é‚£äº›ä¸“ä¸šçš„åè¯ˆäººå‘˜ï¼Œé‚£äº›å¤§å­¦ç”Ÿæœ€å®¹æ˜“ä¿¡ä»»çš„å®¢ä½“æ‰æ˜¯æœ€å±é™©çš„

ä¸ºäº†æœ€å¤§ä¿æŠ¤ä¿¡æ¯å®‰å…¨ä¸éšç§ï¼Œå¤§å­¦ç”Ÿåè¯ˆä¸­å¿ƒï¼ˆSAFCï¼‰åŸºäº telegram å¹³å°ï¼ŒåŒ…å«ä»¥ä¸‹åŠŸèƒ½

* telegram æœºå™¨äºº @SAFC_bot â€”â€” å­¦æ ¡ã€ä¸“ä¸šã€å­¦é™¢ã€è¯¾ç¨‹ã€å¯¼å¸ˆçš„äº¤å‰è¯„ä»·ä¸æŸ¥è¯¢
* telegram ç¾¤ç»„ç¤¾åŒº @SAFC_group â€”â€” å…¬å‘Šä¸äº¤æµå¹³å°

æœ¬å¹³å°éµå®ˆå‡ ç‚¹ä¸ºä¸»æ—¨ï¼š

* å‡ºå‘ï¼šå…±äº«ï¼Œå¼€æ”¾ï¼Œè‡ªç”±çš„ç²¾ç¥ï¼›æˆ‘ä¸ºäººäººï¼Œäººäººä¸ºæˆ‘çš„ç†å¿µ
* æŠ€æœ¯ï¼šå¯†ç æœ‹å…‹ï¼Œå°½å¯èƒ½åœ°åšå¥½éšç§ä¿æŠ¤ã€æ•°æ®ä¸äººèº«å®‰å…¨ï¼›æ•°æ®å…±äº«ä»£ç å¼€æºï¼Œç›¸äº’ç›‘ç£å…±è¿›ã€‚
* å®šä½ï¼šç»¼åˆå¤§å­¦ç”Ÿæ‰€éœ€è¦çš„åŠŸèƒ½ï¼Œä¸å…‰åŒ…æ‹¬æœ€åŸºæœ¬çš„å¯¼å¸ˆè¯„ä»·å’ŒæŸ¥è¯¢åŠŸèƒ½ï¼Œè¿˜èƒ½å¯¹å­¦æ ¡ã€ä¸“ä¸šã€å­¦é™¢ã€è¯¾ç¨‹ã€å­¦ç”Ÿã€å·²æœ‰çš„è¯„ä»·è¿›è¡Œè¯„ä»·ï¼›å¦å¤–æä¾›ä¸€ä¸ªäº¤æµå¹³å°ã€‚

## éšç§

- ä¸ºé˜²æ­¢æ»¥ç”¨ï¼Œä½ çš„ uid å¯èƒ½ä¼šè¢«ä¸´æ—¶å‚¨å­˜åœ¨å†…å­˜ä¸­ï¼Œæœ€å¤š 1 æ—¥ï¼Œé™¤æ­¤ä¹‹å¤–ä¸ä¼šè®°å½•ä»»ä½•ä¸ªäººä¿¡æ¯ã€‚
- ã€Œå‘å¸ƒäºº OTPã€æ˜¯å¯ä»¥è®©æ‚¨æ—¥åè¯æ˜æœ¬è¯„ä»·ç”±æ‚¨å‘å¸ƒï¼Œç”±æ­¤æ‚¨å¯ä»¥ä¿®æ”¹/é”€æ¯æ­¤è¯„è®ºã€‚å…¶éå¿…é€‰é¡¹ï¼Œä¸”ä»…ä¼šå‚¨å­˜å…¶åŠ ç›å“ˆå¸Œã€‚
- æˆ‘ä»¬é»˜è®¤ Telegram æ˜¯å¯ä¿¡åŠå®‰å…¨çš„
- æ—©æœŸå¼€å‘ç»“æŸåï¼Œä»£ç ä¸æ•°æ®å°†å®Œå…¨å¼€æº

## å‘å±•

ç›®å‰æ•æ·æ€§å¼€å‘ï¼Œä»¥åŠŸèƒ½ä¸Šçº¿æ—¶é—´ä¸ºå…ˆï¼Œåç»­éœ€è¦å¤§é‡çš„å¼€å‘é‡æ„ã€‚

## å‚è€ƒ

åˆå§‹æ•°æ®æ¥æºï¼š

https://github.com/pengp25/RateMySupervisor

https://gitee.com/wdwdwd123/RateMySupervisor.git

"#;

pub enum TgResponse {
    Hello,
    Info,
    RetryErrNone,
    NotImplemented,
}

impl ToString for TgResponse {
    fn to_string(&self) -> String {
        // escape(&self.to_unescaped_string())
        match self {
            Self::Hello => concat!(
                "å—¨ï¼æˆ‘æ˜¯å¤§å­¦ç”Ÿåè¯ˆä¸­å¿ƒçš„å®¢æœæœºå™¨äºº ğŸ‘‹\n",
                "_ç›®å‰ä»ä¸ºæ—©æœŸå¼€å‘ç‰ˆæœ¬_ é—®é¢˜æ•¬è¯·åé¦ˆï¼›*è¶Šå¢™ä¸æ˜“ï¼Œå»¶è¿Ÿä¸¢åŒ…æ•¬è¯·è§è°…*\n",
                "æ‚¨å¯ä»¥å‘é€ /cancel æ¥åœæ­¢æ­¤æ¬¡å¯¹è¯\n\n",
                "æ‚¨å¯ä»¥å…ˆæŸ¥è¯¢å®¢ä½“ï¼Œç„¶åæŸ¥çœ‹æˆ–å‘èµ·å¯¹å®¢ä½“çš„è¯„ä»·ã€‚\n\n",
                "æ‚¨æƒ³æŸ¥è¯¢æˆ–è¯„ä»·çš„ã€Œå­¦æ ¡ç±»åˆ«ã€æ˜¯ï¼Ÿæ‚¨å¯ä»¥ç›´æ¥è¾“å…¥æˆ–è€…åœ¨ä¸‹é¢çš„é”®ç›˜é€‰æ‹©æ¡†ä¸­é€‰æ‹©\n\n",
                "_é”®ç›˜é€‰æ‹©æ¡†ä¸­æ²¡æœ‰çš„ä¹Ÿå¯ä»¥ç›´æ¥è¾“å…¥æ¥æ–°å»ºï¼›å¦‚æœæ˜¯ä¸Šä¸ªç±»åˆ«æœ¬èº«è¯·é€‰æ‹©æˆ–è¾“å…¥ `self`ã€‚ä¸‹åŒ_\n",
                "ï¼ˆå¦‚æœæ˜¯åœ¨ PC ç«¯ç¾¤èŠä¸­ä½¿ç”¨ï¼Œé”®ç›˜é€‰æ‹©æ¡†å¼¹å‡ºå¯èƒ½æœ‰ bugï¼‰",        
            )
            .to_owned(),
            Self::Info => BOT_INFO.to_owned(),
            Self::RetryErrNone => "ç©ºæ¶ˆæ¯é”™è¯¯ã€‚å¯¹ä¸èµ·ï¼Œè¯·é‡è¯•".to_owned(),
            Self::NotImplemented => "ğŸ˜¢ åŠŸèƒ½å°šæœªå®ç°ï¼Œæ•¬è¯·æœŸå¾…".to_owned(),
        }
    }
}

// TODO ä½¿ç”¨åºåˆ—åŒ–ä¸ååºåˆ—åŒ–å®ç° ä»£æ›¿ EnumString
use strum_macros::{Display, EnumString};
#[derive(Debug, EnumString, Display)] // ?
pub enum ObjectOp {
    Read,
    Commet,
    Info,
    End,
    Add,
    Return(i32),
}

impl Into<String> for ObjectOp {
    fn into(self) -> String {
        format!("{:?}", self)
    }
}

pub fn build_op_keyboard() -> InlineKeyboardMarkup {
    InlineKeyboardMarkup::new([
        [
            InlineKeyboardButton::callback("ğŸ‘€ æŸ¥çœ‹è¯„ä»·", ObjectOp::Read),
            InlineKeyboardButton::callback("ğŸ’¬ å¢åŠ è¯„ä»·", ObjectOp::Commet),
        ],
        [
            InlineKeyboardButton::callback("ğŸ¤— è¯¦ç»†ä¿¡æ¯", ObjectOp::Info),
            InlineKeyboardButton::callback("ğŸ ç»“æŸ", ObjectOp::End),
        ],
    ])
}

#[test]
fn my_test() {
    use std::str::FromStr;
    println!("{:?}", ObjectOp::Return(2));
    match ObjectOp::from_str("Return").unwrap() {
        ObjectOp::Read => {}
        ObjectOp::Commet => {}
        ObjectOp::Info => todo!(),
        ObjectOp::End => todo!(),
        ObjectOp::Add => todo!(),
        ObjectOp::Return(i) => println!("Return{i}"),
    }
}
